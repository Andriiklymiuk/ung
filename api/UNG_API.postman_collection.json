{
  "info": {
    "_postman_id": "ung-api-collection",
    "name": "UNG API Collection",
    "description": "Complete API collection for UNG - Universal Next-Gen Billing & Tracking\n\n## Features\n- Multi-tenant architecture with encrypted databases\n- JWT authentication with refresh tokens\n- Invoice management\n- Time tracking\n- Client and contract management\n\n## Base URL\n`http://localhost:3000/api/v1`\n\n## Authentication\nMost endpoints require JWT authentication. Use the `Authorization` header with `Bearer <token>` format.\n\n## Environment Variables\n- `base_url`: API base URL (default: http://localhost:3000)\n- `api_version`: API version (default: v1)\n- `access_token`: JWT access token (set automatically after login)\n- `refresh_token`: JWT refresh token (set automatically after login)\n- `tenant_id`: Current tenant ID (set automatically after registration/login)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "description": "User authentication endpoints including registration, login, token refresh, and profile management.",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Store tokens automatically",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('access_token', response.access_token);",
                  "    pm.environment.set('refresh_token', response.refresh_token);",
                  "    pm.environment.set('tenant_id', response.user.id);",
                  "    console.log('\u2705 Registered successfully. Tokens saved.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"name\": \"John Doe\",\n  \"company_name\": \"Acme Inc\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "auth",
                "register"
              ]
            },
            "description": "Register a new user account. Creates a new tenant with encrypted database.\n\n**Request Body:**\n- `email` (string, required): User email address\n- `password` (string, required): Strong password (min 8 characters)\n- `name` (string, required): Full name\n- `company_name` (string, optional): Company name\n\n**Response:**\n- `access_token`: JWT access token (expires in 15 minutes)\n- `refresh_token`: JWT refresh token (expires in 7 days)\n- `user`: User object with profile information\n\n**Notes:**\n- Password is hashed using bcrypt\n- Tenant database is created and encrypted\n- Tokens are automatically stored in environment variables"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"name\": \"John Doe\",\n  \"company_name\": \"Acme Inc\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{base_url}}/api/{{api_version}}/auth/register",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "{{api_version}}",
                    "auth",
                    "register"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"refresh_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"user\": {\n    \"id\": \"user_123abc\",\n    \"email\": \"user@example.com\",\n    \"name\": \"John Doe\",\n    \"company_name\": \"Acme Inc\",\n    \"created_at\": \"2024-01-15T10:30:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Store tokens automatically",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('access_token', response.access_token);",
                  "    pm.environment.set('refresh_token', response.refresh_token);",
                  "    pm.environment.set('tenant_id', response.user.id);",
                  "    console.log('\u2705 Logged in successfully. Tokens saved.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePassword123!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "auth",
                "login"
              ]
            },
            "description": "Authenticate user and receive JWT tokens.\n\n**Request Body:**\n- `email` (string, required): User email\n- `password` (string, required): User password\n\n**Response:**\n- `access_token`: JWT access token (expires in 15 minutes)\n- `refresh_token`: JWT refresh token (expires in 7 days)\n- `user`: User profile\n\n**Notes:**\n- Tenant database is decrypted and loaded into memory\n- Tokens are JWT signed with HS256"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Update access token",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('access_token', response.access_token);",
                  "    console.log('\u2705 Token refreshed successfully.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/auth/refresh",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "auth",
                "refresh"
              ]
            },
            "description": "Refresh access token using refresh token.\n\n**Request Body:**\n- `refresh_token` (string, required): Valid refresh token\n\n**Response:**\n- `access_token`: New JWT access token\n\n**Notes:**\n- Refresh tokens are valid for 7 days\n- Access tokens expire after 15 minutes\n- Use this endpoint before access token expires"
          },
          "response": []
        },
        {
          "name": "Get Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/auth/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "auth",
                "me"
              ]
            },
            "description": "Get current user profile.\n\n**Headers:**\n- `Authorization: Bearer <access_token>`\n\n**Response:**\n- User profile with email, name, company info\n\n**Notes:**\n- Requires valid access token\n- Returns 401 if token expired"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Invoices",
      "description": "Invoice management endpoints for creating, viewing, and managing invoices.",
      "item": [
        {
          "name": "List Invoices",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/invoices?status=pending&limit=10&offset=0",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "invoices"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "pending",
                  "description": "Filter by status (pending, paid, overdue)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of results per page"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Pagination offset"
                }
              ]
            },
            "description": "Get list of invoices for the current tenant.\n\n**Query Parameters:**\n- `status` (string): Filter by status (pending, paid, overdue, cancelled)\n- `client_id` (integer): Filter by client ID\n- `from_date` (string): Start date (YYYY-MM-DD)\n- `to_date` (string): End date (YYYY-MM-DD)\n- `limit` (integer): Results per page (default: 50)\n- `offset` (integer): Pagination offset (default: 0)\n\n**Response:**\n- Array of invoice objects\n- Total count\n- Pagination info"
          },
          "response": []
        },
        {
          "name": "Get Invoice by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/invoices/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "invoices",
                "1"
              ]
            },
            "description": "Get invoice details by ID.\n\n**Path Parameters:**\n- `id` (integer): Invoice ID\n\n**Response:**\n- Complete invoice object with line items\n- Client details\n- Payment history"
          },
          "response": []
        },
        {
          "name": "Create Invoice",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"invoice_num\": \"INV-2024-001\",\n  \"company_id\": 1,\n  \"client_id\": 1,\n  \"amount\": 1500.00,\n  \"currency\": \"USD\",\n  \"description\": \"Web Development Services - January 2024\",\n  \"due_date\": \"2024-02-15\",\n  \"line_items\": [\n    {\n      \"item_name\": \"Frontend Development\",\n      \"description\": \"React application development\",\n      \"quantity\": 40,\n      \"rate\": 25.00,\n      \"amount\": 1000.00\n    },\n    {\n      \"item_name\": \"Backend API\",\n      \"description\": \"Node.js API development\",\n      \"quantity\": 20,\n      \"rate\": 25.00,\n      \"amount\": 500.00\n    }\n  ],\n  \"notes\": \"Payment due within 30 days\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/invoices",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "invoices"
              ]
            },
            "description": "Create a new invoice.\n\n**Request Body:**\n- `invoice_num` (string): Unique invoice number\n- `company_id` (integer): Company ID\n- `client_id` (integer): Client ID\n- `amount` (number): Total amount\n- `currency` (string): Currency code (USD, EUR, etc.)\n- `description` (string): Invoice description\n- `due_date` (string): Due date (YYYY-MM-DD)\n- `line_items` (array): Line items array\n- `notes` (string): Additional notes\n\n**Response:**\n- Created invoice object with ID"
          },
          "response": []
        },
        {
          "name": "Update Invoice",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"paid\",\n  \"notes\": \"Payment received via wire transfer\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/invoices/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "invoices",
                "1"
              ]
            },
            "description": "Update invoice details.\n\n**Path Parameters:**\n- `id` (integer): Invoice ID\n\n**Request Body:**\n- Any invoice fields to update\n\n**Response:**\n- Updated invoice object"
          },
          "response": []
        },
        {
          "name": "Delete Invoice",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/invoices/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "invoices",
                "1"
              ]
            },
            "description": "Delete an invoice.\n\n**Path Parameters:**\n- `id` (integer): Invoice ID\n\n**Response:**\n- Success message"
          },
          "response": []
        },
        {
          "name": "Email Invoice",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"to\": [\"client@example.com\"],\n  \"cc\": [\"accounting@example.com\"],\n  \"subject\": \"Invoice #INV-2024-001\",\n  \"message\": \"Please find attached your invoice for services rendered.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/invoices/1/email",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "invoices",
                "1",
                "email"
              ]
            },
            "description": "Send invoice via email.\n\n**Path Parameters:**\n- `id` (integer): Invoice ID\n\n**Request Body:**\n- `to` (array): Recipient email addresses\n- `cc` (array, optional): CC recipients\n- `subject` (string): Email subject\n- `message` (string): Email body\n\n**Response:**\n- Success message with email status"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Health Check",
      "description": "System health and status endpoints.",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Check if API is running and healthy.\n\n**Response:**\n- Status message\n\n**Notes:**\n- No authentication required\n- Used for monitoring and load balancers"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Clients",
      "item": [
        {
          "name": "List Clients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/clients",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "clients"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Client",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/clients/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "clients",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('client_id', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Acme Corp\",\n  \"email\": \"contact@acme.com\",\n  \"address\": \"123 Business St\",\n  \"tax_id\": \"TAX123456\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/clients",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "clients"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Client",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Acme Corp Updated\",\n  \"email\": \"newcontact@acme.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/clients/{{client_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "clients",
                "{{client_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Client",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/clients/{{client_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "clients",
                "{{client_id}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Companies",
      "item": [
        {
          "name": "List Companies",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/companies",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "companies"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Company",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/companies/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "companies",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Company",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"My Freelance Business\",\n  \"email\": \"business@example.com\",\n  \"phone\": \"+1-555-0100\",\n  \"address\": \"456 Business Ave\",\n  \"registration_address\": \"456 Business Ave\",\n  \"tax_id\": \"TAX-987654\",\n  \"bank_name\": \"National Bank\",\n  \"bank_account\": \"1234567890\",\n  \"bank_swift\": \"SWIFT123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/companies",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "companies"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Company",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+1-555-0101\",\n  \"address\": \"789 New Address\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/companies/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "companies",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Company",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/companies/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "companies",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Contracts",
      "item": [
        {
          "name": "List Contracts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/contracts",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "contracts"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Contract",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/contracts/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "contracts",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Contract",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contract_num\": \"CTR-2025-001\",\n  \"client_id\": 1,\n  \"name\": \"Web Development Q1 2025\",\n  \"contract_type\": \"hourly\",\n  \"hourly_rate\": 75.0,\n  \"currency\": \"USD\",\n  \"start_date\": \"2025-01-01\",\n  \"active\": true,\n  \"notes\": \"Full-stack development services\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/contracts",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "contracts"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Contract",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hourly_rate\": 85.0,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/contracts/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "contracts",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Contract",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/contracts/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "contracts",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Expenses",
      "item": [
        {
          "name": "List Expenses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/expenses",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "expenses"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Expense",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/expenses/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "expenses",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Expense",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Adobe Creative Cloud subscription\",\n  \"amount\": 54.99,\n  \"currency\": \"USD\",\n  \"category\": \"software\",\n  \"date\": \"2025-01-15\",\n  \"vendor\": \"Adobe Inc\",\n  \"notes\": \"Monthly subscription\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/expenses",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "expenses"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Expense",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 59.99,\n  \"notes\": \"Price increased\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/expenses/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "expenses",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Expense",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/expenses/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "expenses",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Time Tracking",
      "item": [
        {
          "name": "List Tracking Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Active Session",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking/active",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking",
                "active"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Start Tracking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('tracking_session_id', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"client_id\": 1,\n  \"contract_id\": 1,\n  \"project_name\": \"Website Development\",\n  \"billable\": true,\n  \"notes\": \"Working on frontend features\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking/start",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking",
                "start"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Stop Tracking",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking/{{tracking_session_id}}/stop",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking",
                "{{tracking_session_id}}",
                "stop"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Manual Entry",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"client_id\": 1,\n  \"contract_id\": 1,\n  \"project_name\": \"Website Development\",\n  \"start_time\": \"2025-01-15T09:00:00Z\",\n  \"end_time\": \"2025-01-15T17:00:00Z\",\n  \"hours\": 8.0,\n  \"billable\": true,\n  \"notes\": \"Full day of work\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Tracking Session",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Tracking Session",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"billable\": false,\n  \"notes\": \"Updated notes\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Tracking Session",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/{{api_version}}/tracking/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "{{api_version}}",
                "tracking",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-refresh token if expired",
          "const accessToken = pm.environment.get('access_token');",
          "const refreshToken = pm.environment.get('refresh_token');",
          "",
          "if (accessToken && refreshToken) {",
          "    // Check if token might be expired (simple check)",
          "    // In production, decode JWT and check exp claim",
          "    console.log('Using access token from environment');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test scripts",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});",
          "",
          "if (pm.response.code !== 401 && pm.response.code !== 404) {",
          "    pm.test('Response has correct content type', function () {",
          "        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "    });",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "api_version",
      "value": "v1",
      "type": "string"
    }
  ]
}